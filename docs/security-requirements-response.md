# セキュリティ要求対応状況

ハンディリーダ（Window D）が満たすべき主なセキュリティ要求と対応状況を整理する。評価は 2025-10-31 時点。

| 要求項目 | 内容 | 対応状況 | 備考 |
| --- | --- | --- | --- |
| 認証情報の保護 | API トークンを安全に保管し、最低限の権限とする | ✅ config は `root:root 640`。Pi5 側で発行・ローテーション。`install_client_config.sh` がバックアップを暗号化せず残すため、不要になったバックアップは手動削除する。 |
| 通信経路保護 | 送信データを盗聴・改ざんから守る | ☐ 工場内 LAN + WPA2 のみ。将来の HTTPS/TLS 化を Pi5 側と調整中。 |
| 端末紛失対策 | 端末紛失・盗難時の情報漏えいを抑える | ☐ ローカルキューは平文 SQLite。紛失時は Pi5 トークンを失効し、端末を再イメージする手順を RUNBOOK に追記予定。物理ロック・管理台帳で補完。 |
| ログ監査 | 送信・エラーを追跡できるログを保持する | ✅ ハンディ側ローテーションログ、Pi5 側 `logistics_audit.log` を突き合わせ可能。月次で保全手順を RUNBOOK に追加予定。 |
| 更新管理 | ソフトウェアの変更履歴とテスト記録を保持する | ✅ Git ブランチ運用＋ `docs/test-notes/` で実機検証ログを保管。リリース時は CHANGELOG 更新。 |
| USB デバイス制御 | 想定外の USB デバイス接続によるリスクを減らす | △ `setup_serial_env.sh` で VID/PID を固定。ただし他デバイスの VID/PID に対応が必要な場合は手動変更が必要。 |
| 監査証跡 | 端末操作の証跡を残す | △ 手動記録（棚卸し計画・CHANGELOG）を実施。自動収集は未実装。 |

**ステータス凡例**: ✅ 対応済み / △ 一部対応・改善予定 / ☐ 未対応

課題（⟲）として残る項目は `docs/logistics-audit-plan.md` の次回アクションへ転記する。
